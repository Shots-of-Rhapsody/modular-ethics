<!doctype html>
<html lang="en">
<head>
  <link rel="stylesheet" href="assets/site.css">
  <!-- Meta -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Methods Paper - Ethics Testbed</title>
  <meta name="description" content="A modular, transparent testbed that turns ethical theories into comparable mathematical programs and runs them on shared scenarios.">
  <meta name="theme-color" content="#00A86B">

  <!-- Open Graph -->
  <meta property="og:title" content="Methods Paper — Ethics Testbed">
  <meta property="og:description" content="A small, auditable framework for modular moral reasoning with explicit pluralism and safeguards.">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://xartaiusx.github.io/ethics.testbed/paper.html">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">

  <!-- MathJax (for inline math) -->
  <script>
    window.MathJax = { tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] }, svg: { fontCache: 'global' } };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

  <!-- Styles (harmonized with index.html) -->
  <style>
    :root{
      --jade:#00A86B;
      --ink:#0b1220;
      --ink-2:#1f2637;
      --fog:#f6f7fb;
      --muted:#6b7280;
      --ring:rgba(0,168,107,.25);
      --radius:14px;
      --maxw:980px;
    }
    @media (prefers-color-scheme: dark){
      :root{ --ink:#0b0f14; --ink-2:#111827; --fog:#0b0f14; --muted:#9aa4b2; }
      body{ color-scheme: dark; }
    }
    *{ box-sizing:border-box; }
    html{ scroll-behavior:smooth; }
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans";
      color:#111827;
      background:linear-gradient(180deg,#ffffff 0%,#fafcff 100%);
    }
    @media (prefers-color-scheme: dark){
      body{ color:#e5e7eb; background:radial-gradient(1200px 600px at 20% -10%, #0c1720, transparent), #0b0f14; }
    }
    a{ color:var(--jade); text-decoration:none; }
    a:hover{ text-decoration:underline; }

    header{
      position:sticky; top:0; z-index:40;
      backdrop-filter:saturate(120%) blur(10px);
      background: color-mix(in srgb, var(--fog) 80%, transparent);
      border-bottom:1px solid color-mix(in srgb, var(--muted) 20%, transparent);
    }
    .wrap{ max-width:var(--maxw); margin:0 auto; padding:0 20px; }
    .nav{ display:flex; align-items:center; justify-content:space-between; height:64px; }
    .brand{ display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.2px; }
    .brand-logo{ width:28px; height:28px; border-radius:8px; background:conic-gradient(from 180deg at 50% 50%, #00a86b, #00c38a, #00a86b); }

    main{ padding:36px 0 64px; }
    h1,h2,h3{ font-family:"Playfair Display", Georgia, serif; }
    h1{ font-size: clamp(32px, 4vw, 44px); margin:6px 0 10px; line-height:1.15; }
    h2{ font-size: clamp(24px, 3vw, 32px); margin:34px 0 12px; }
    h3{ font-size: 20px; margin:22px 0 8px; }
    .kicker{
      display:inline-flex; align-items:center; gap:8px;
      font-weight:700; text-transform:uppercase; letter-spacing:.12em;
      color:var(--jade);
      background: color-mix(in srgb, var(--jade) 12%, transparent);
      padding:6px 10px; border-radius:999px; font-size:12px;
    }
    .lead{ color:var(--muted); font-size:18px; line-height:1.7; }
    .meta{ color:var(--muted); font-size:13px; }
    .toc{
      margin:14px 0 22px; padding:14px; border:1px solid color-mix(in srgb, var(--muted) 18%, transparent);
      border-radius:12px; background: color-mix(in srgb, var(--jade) 6%, transparent);
    }
    .toc ol{ margin:0; padding-left:18px; }
    section{ scroll-margin-top:76px; }
    .box{
      border:1px solid color-mix(in srgb, var(--jade) 24%, transparent);
      background: color-mix(in srgb, var(--jade) 7%, transparent);
      border-radius:12px; padding:14px 16px; margin:14px 0;
    }
    .grid2{ display:grid; gap:16px; grid-template-columns:1fr; }
    @media (min-width:920px){ .grid2{ grid-template-columns:1fr 1fr; } }
    pre, code{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      background:#0d1117; color:#e5e7eb;
    }
    pre{ padding:14px; border-radius:12px; overflow:auto; border:1px solid #1f2937; }
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:6px 10px; border-radius:999px; font-size:12px; font-weight:700; color:var(--jade);
      background: color-mix(in srgb, var(--jade) 12%, transparent);
      border:1px solid color-mix(in srgb, var(--jade) 24%, transparent);
    }
    .callout{
      border-left:4px solid var(--jade); padding:10px 12px; background: color-mix(in srgb, #fff 92%, var(--jade) 8%); border-radius:8px;
    }
    .foot{
      margin-top:40px; padding-top:20px; border-top:1px dashed color-mix(in srgb, var(--muted) 24%, transparent);
      color:var(--muted); font-size:12px;
    }
    .btn{ display:inline-block; font-weight:700; padding:10px 16px; border-radius:999px; background:var(--jade); color:#fff; box-shadow:0 6px 18px -8px var(--ring),0 2px 6px -2px var(--ring); }
    .btn:hover{ text-decoration:none; }
  </style>
</head>
<body>

  <!-- Header -->
<header>
  <div class="nav-container">
    <!-- Brand -->

    <a class="brand" href="/">
      <span class="brand-logo" aria-hidden="true"></span>
      <span class="brand-name">Ethics Testbed</span>
    </a>

    <!-- Navigation -->
    <nav class="site-nav">
      <!-- Mobile toggle -->
      <button class="menu" aria-label="Menu" onclick="
        const list = this.nextElementSibling;
        list.classList.toggle('is-open');
      ">☰</button>
      <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/contribute.html">Contribute</a></li>
        <li><a href="/interactive.html">Interactive</a></li>
        <li><a href="/language-math.html">Language &amp; Math</a></li>
        <li><a href="/paper.html">Paper</a></li>
        <li><a href="/research.html">Research</a></li>
        <li><a href="/results.html">Results</a></li>
        <li><a href="/stories.html">Stories</a></li>
        <li><a href="/contact.html">Contact</a></li>
      </ul>
    </nav>

    <!-- Right CTA: Repo link -->
    <div class="nav-cta">
      <a class="btn outline icon" href="https://github.com/xartaiusx/ethics.testbed" target="_blank" rel="noopener">
        <svg width="18" height="18" viewBox="0 0 16 16" aria-hidden="true">
          <path fill="currentColor" d="M8 0a8 8 0 0 0-2.53 15.6c.4.07.55-.17.55-.38v-1.33c-2.23.49-2.7-1.07-2.7-1.07-.36-.9-.9-1.14-.9-1.14-.73-.49.06-.48.06-.48.8.06 1.22.83 1.22.83.72 1.22 1.88.86 2.34.66.07-.52.28-.86.5-1.05-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.58.82-2.13-.08-.2-.36-1.01.08-2.11 0 0 .67-.21 2.2.81a7.6 7.6 0 0 1 2-.27 7.6 7.6 0 0 1 2 .27c1.53-1.02 2.2-.81 2.2-.81.44 1.1.16 1.9.08 2.11.51.55.82 1.26.82 2.13 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.47v2.18c0 .21.15.46.55.38A8 8 0 0 0 8 0z"/>
        </svg>
        <span class="sr-only">View Repo</span>
      </a>
    </div>
  </div>
</header>

  <main class="wrap" id="main">
    <!-- Title -->
    <p class="kicker">Methods Paper</p>
    <h1>A Modular Testbed for Ethics: Turning Philosophical Theories into Comparable Mathematical Programs</h1>
    <p class="meta">Version 0.1 · <span id="date"></span> · MIT License</p>

    <!-- Abstract -->
    <section id="abstract">
      <h2>Abstract</h2>
      <p class="lead">
        We present a small, auditable framework that converts major ethical views into modular evaluators running on shared scenarios.
        Facts are represented by a causal world model. Values are encoded as normative modules, which output theory-specific scores or constraints.
        Moral disagreement is handled by explicit credences with safeguards for rights. We release a schema, two seed scenarios & minimal implementations
        for consequentialism, deontic constraints & virtue distance. Early results demonstrate transparent points of agreement & principled divergence.
      </p>
    </section>

    <!-- Table of Contents -->
    <section id="toc" class="toc">
      <strong>Contents</strong>
      <ol>
        <li><a href="#intro">Introduction</a></li>
        <li><a href="#framework">Framework</a></li>
        <li><a href="#implementations">Implementations of Theories</a></li>
        <li><a href="#schema">Scenario Schema & Dataset</a></li>
        <li><a href="#experiments">Experiments</a></li>
        <li><a href="#results">Results</a></li>
        <li><a href="#limitations">Limitations & Ethical Considerations</a></li>
        <li><a href="#ledger">Axiom Ledger & Reproducibility</a></li>
        <li><a href="#discussion">Discussion & Future Work</a></li>
        <li><a href="#appendices">Appendices</a></li>
      </ol>
    </section>

    <!-- Introduction -->
    <section id="intro">
      <h2>1. Introduction</h2>
      <p>
        Ethical debate often stalls on rhetoric. We aim for clarity by separating facts from values & by running rival views on the same inputs.
        The contribution is a minimal, extensible testbed: a shared scenario format; modular evaluators for major theories; an aggregation rule for
        pluralism & an axiom ledger that records assumptions in plain English.
      </p>
      <div class="box">
        <strong>Design principles.</strong> Small honest models, explicit uncertainty, side-constraints before trade-offs & auditability by non-specialists.
      </div>
    </section>

    <!-- Framework -->
    <section id="framework">
      <h2>2. Framework</h2>
      <h3>2.1 World models & scenarios</h3>
      <p>
        A scenario encodes agents, actions, outcomes & constraints. A world model $M$ provides $P(O \mid a, M)$, the distribution over outcomes for each action $a$.
      </p>

      <h3>2.2 Normative modules</h3>
      <p>
        Each ethical view $j$ contributes either a choiceworthiness function $CW_j(a \mid M)$ or admissibility constraints $g_k(a,M)\le 0$.
        Modules depend only on scenario fields & shared utilities.
      </p>

      <h3>2.3 Moral uncertainty & aggregation</h3>
      <p>
        After normalizing module outputs to $[0,1]$ within a scenario, we aggregate by credences $p_j$:
        $$
          CW(a)=\sum_j p_j\, f_j\!\left(\widehat{CW}_j(a)\right)
        $$
        We apply deontic red lines lexicographically: reject actions that violate mandatory constraints, then compare remaining options by $CW$.
      </p>

      <h3>2.4 Explanation sets</h3>
      <p>
        Each recommendation includes a minimal explanation set: the smallest group of premises that drove the result. This improves transparency & supports disagreement.
      </p>
    </section>

    <!-- Implementations -->
    <section id="implementations">
      <h2>3. Implementations of Theories</h2>
      <div class="grid2">
        <div>
          <h3>3.1 Consequentialism</h3>
          <p>
            Expected welfare with priority to the worse-off:
          </p>
          <pre><code>CW_cons(a) = E[ Σ_i w_i · v(U_i(O)) | a, M ]
v(u) is concave; w_i ≥ 0.</code></pre>
        </div>
        <div>
          <h3>3.2 Deontic constraints</h3>
          <p>
            Admissibility:
          </p>
          <pre><code>Admissible(a) iff ∀k: g_k(a,M) ≤ 0
Examples: respect informed consent; treat like cases alike; keep credible promises.</code></pre>
        </div>
      </div>
      <div class="grid2">
        <div>
          <h3>3.3 Virtue distance</h3>
          <pre><code>CW_virtue(a) = - || T_after(a) - T* ||
Traits: honesty, compassion, fairness.</code></pre>
        </div>
        <div>
          <h3>3.4 Normalization</h3>
          <pre><code>normalize(x) = (x - min_a x) / (max_a x - min_a x + ε)</code></pre>
        </div>
      </div>
      <div class="callout">
        <strong>Note.</strong> Other views slot in likewise: contractualism (minimize strongest complaint), Rawlsian maximin (maximize minimum $U_i$), care ethics (relationship-sensitive weights).
      </div>
    </section>

    <!-- Schema -->
    <section id="schema">
      <h2>4. Scenario Schema & Dataset</h2>
      <p>
        The schema is compact & human-readable. It keeps facts explicit & leaves values to the modules.
      </p>
      <pre><code>{
  "id": "string",
  "context": {
    "domain": "triage|evacuation|policy|...",
    "tags": ["emergency", "resource-scarce"],
    "culture": {"consent_threshold": 0.7, "complaint_norm": "strict"}
  },
  "agents": [
    {"id":"A","baseline":{"wellbeing":0.55,"years_left":35},
     "dependencies":["child_C"],"consent":true,"role":"patient"}
  ],
  "actions": ["a1","a2","a3"],
  "outcomes": {
    "a1": [{"p":0.8,"A":{"alive":true,"years_gain":35}}],
    "a2": [{"p":0.6,"B":{"alive":true,"years_gain":35}}]
  },
  "constraints": {
    "no_intentional_harm_innocent": true,
    "treat_like_cases_alike": true,
    "respect_informed_consent": true
  },
  "notes": "assumptions here"
}</code></pre>

      <h3>4.1 Seed scenarios</h3>
      <details open>
        <summary><strong>Scenario 1:</strong> Clinical triage - one ventilator, two patients</summary>
        <pre><code>{
  "id":"triage-vent-v1",
  "agents":[
    {"id":"A","baseline":{"wellbeing":0.55,"years_left":35},"consent":true,
     "survival":{"vent":0.80,"no_vent":0.10}},
    {"id":"B","baseline":{"wellbeing":0.55,"years_left":35},"consent":true,
     "survival":{"vent":0.60,"no_vent":0.55}}
  ],
  "actions":["a1_allocate_A","a2_allocate_B","a3_lottery"],
  "notes":"Prognosis differences count as relevant; lottery allowed when differences are small."
}</code></pre>
      </details>

      <details>
        <summary><strong>Scenario 2:</strong> Flood evacuation - promise vs numbers</summary>
        <pre><code>{
  "id":"evac-promise-v1",
  "context":{"tags":["flood","resource-scarce"]},
  "agents":["D1(elderly)","D2","D3","D4","D5","R(rescuer_with_promise_to_D1)"],
  "boat_capacity":3,
  "prob_survive_if_rescued":0.95,
  "prob_if_delayed":{"east":0.40,"west":0.60},
  "actions":["b1_east_now","b2_west_plus_one_east","b3_mixed_break_promise"]
}</code></pre>
      </details>
    </section>

    <!-- Experiments -->
    <section id="experiments">
      <h2>5. Experiments</h2>
      <p>
        We compute module outputs for each action & apply deontic admissibility. Remaining actions are ranked by the aggregated score with credences
        $p = \{ p_{\text{cons}}, p_{\text{deon}}, p_{\text{virtue}} \}$.
      </p>
      <div class="grid2">
        <div>
          <h3>5.1 Base settings</h3>
          <ul>
            <li>Weights $w_i = 1$ unless specified.</li>
            <li>Priority function $v(u)=\sqrt{u}$.</li>
            <li>Credences $p = \{0.5, 0.3, 0.2\}$.</li>
            <li>Normalization by min–max within scenario.</li>
          </ul>
        </div>
        <div>
          <h3>5.2 Sensitivity sweep</h3>
          <ul>
            <li>Vary $p$ over a simplex grid.</li>
            <li>Vary one factual parameter per scenario (e.g., survival delta, promise threshold).</li>
            <li>Record stability and pluralistic regret.</li>
          </ul>
        </div>
      </div>

      <div class="box">
        <strong>Reproducibility checklist.</strong>
        Code links, random seeds, scenario JSON, module versions & ledger version are attached to each run ID.
      </div>
    </section>

    <!-- Results -->
    <section id="results">
      <h2>6. Results</h2>
      <p>
        Placeholder for first runs. We report for each scenario: module-wise recommendations, admissibility rejections, final aggregated choice & the minimal explanation set.
      </p>
      <div class="grid2">
        <div>
          <h3>6.1 Triage</h3>
          <pre><code>Module picks (illustrative)
- Consequentialism: a1_allocate_A
- Deontic: all admissible
- Virtue: a1 with fairness note
Aggregate (p = {0.5,0.3,0.2}): a1</code></pre>
        </div>
        <div>
          <h3>6.2 Evacuation</h3>
          <pre><code>Module picks (illustrative)
- Consequentialism: b2_west_plus_one_east
- Deontic: b2 inadmissible if promise is hard; b3 admissible
- Virtue: b3 (compassion, honesty)
Aggregate (p = {0.5,0.3,0.2}): depends on promise rule</code></pre>
        </div>
      </div>
    </section>

    <!-- Limitations -->
    <section id="limitations">
      <h2>7. Limitations & Ethical Considerations</h2>
      <ul>
        <li><strong>Interpersonal comparability.</strong> Report cardinal & ordinal analyses side by side.</li>
        <li><strong>Rights are not utilities.</strong> Enforce side-constraints lexically before trade-offs.</li>
        <li><strong>Culture.</strong> Tune parameters with stratified reporting rather than averaging away divergence.</li>
        <li><strong>Misuse risk.</strong> Require explanation sets & scope notes for each deployment.</li>
      </ul>
    </section>

    <!-- Ledger -->
    <section id="ledger">
      <h2>8. Axiom Ledger & Reproducibility</h2>
      <div class="grid2">
        <div>
          <h3>8.1 Axioms (v0.1)</h3>
          <ol>
            <li>Persons have equal moral worth.</li>
            <li>Comparable goods are explicitly scaled within each scenario.</li>
            <li>Uncertainty is modeled; guesses are distributions.</li>
            <li>Rights & duties act as side-constraints.</li>
            <li>Doing vs allowing matters but is not decisive alone.</li>
            <li>Consent changes scores & constraint triggers.</li>
            <li>Priority to the worse-off via concavity or priority weights.</li>
            <li>Like cases alike; only prognosis-relevant differences justify unequal treatment.</li>
            <li>Minimal explanations identify the few premises that did the work.</li>
            <li>Pluralism is explicit; red lines are not aggregative.</li>
            <li>Culture tunes parameters, not personhood.</li>
            <li>Reversibility check flags unstable rules.</li>
          </ol>
        </div>
        <div>
          <h3>8.2 Versioning</h3>
          <pre><code>Run ID: RUN-YYYYMMDD-N
Ledger: Axiom v0.1
Modules: cons v0.1, deon v0.1, virtue v0.1
Seeds: triage-vent-v1, evac-promise-v1
Random seed: 42</code></pre>
        </div>
      </div>
      <div class="box">
        <strong>How to disagree with us.</strong> Point to a specific axiom, parameter, or dataset field. Propose a replacement & show its effect on a scenario.
      </div>
    </section>

    <!-- Discussion -->
    <section id="discussion">
      <h2>9. Discussion & Future Work</h2>
      <ul>
        <li>Richer rights models & role-based duties.</li>
        <li>Learning value weights safely from diverse panels.</li>
        <li>Dynamic contexts & sequential decisions.</li>
        <li>Cross-cultural replication with preregistered scenarios.</li>
      </ul>
    </section>

    <!-- Appendices -->
    <section id="appendices">
      <h2>Appendices</h2>
      <h3>A. Normalization proof sketch</h3>
      <p>Min–max mapping is monotone & affine-invariant within the action set; $\epsilon$ prevents divide-by-zero when actions tie.</p>

      <h3>B. Constraint algebra (examples)</h3>
      <pre><code>// Promise keeping as hard constraint unless large-harm override
g_promise(a,M) = I[ a breaks credible promise ] · I[ ΔLivesSaved(a_alt,a) &lt; θ ] - 0

// Treat like cases alike
g_like(a,M) = max(0, dissimilarity_irrelevant(a))</code></pre>

      <h3>C. Minimal explanation sets (template)</h3>
      <pre><code>[
  "E1: Prognosis delta between A and B is material.",
  "E2: Promise treated as hard only when ΔLivesSaved &lt; θ.",
  "E3: Credences p = {0.5,0.3,0.2}."
]</code></pre>

      <h3>D. Project log</h3>
      <pre><code>Week 0 — Scaffold: Ledger v0.1, schema, two scenarios.
Week 1 — First runs: baseline modules and sensitivity sweep. (pending)</code></pre>
    </section>

    <div class="foot">
      <a class="btn" href="index.html">Back to Home</a>
      <p>© <span id="y"></span> Ethics Testbed · <a href="LICENSE" target="_blank" rel="noopener">MIT</a></p>
    </div>
  </main>

  <!-- Scripts -->
  <script>
    // Dater
    const d = new Date();
    document.getElementById('date').textContent = d.toLocaleDateString(undefined, {year:'numeric', month:'long', day:'numeric'});
    document.getElementById('y').textContent = d.getFullYear();

    // Smooth hash scrolling focus fix
    if (location.hash) {
      setTimeout(() => {
        const el = document.querySelector(location.hash);
        el && el.setAttribute('tabindex','-1') && el.focus();
      }, 60);
    }

    // Optional: build a compact local ToC (already static above, but this keeps section numbers consistent if edited)
    (function rebuildTOC(){
      const toc = document.querySelector('#toc ol');
      if (!toc) return;
      const ids = ['intro','framework','implementations','schema','experiments','results','limitations','ledger','discussion','appendices'];
      const labels = ['Introduction','Framework','Implementations of Theories','Scenario Schema and Dataset','Experiments','Results','Limitations and Ethical Considerations','Axiom Ledger and Reproducibility','Discussion and Future Work','Appendices'];
      toc.innerHTML = ids.map((id,i)=>`<li><a href="#${id}">${labels[i]}</a></li>`).join('');
    })();
  </script>
  <script src="assets/site.js"></script>
</body>
</html>
